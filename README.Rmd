---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# process published nhs data

<!-- badges: start -->
<!-- badges: end -->

Since 2012, the City Intelligence Unit's Demography Team made has use of extracts of patient register data as part of its ongoing analysis of population change.  These extracts were provided under license by the NHS and consisted of aggregate counts of persons registered with a GP by age, sex, and area of residence.  

In recent years, NHS Digital has regularly published data about the numbers of persons present on GP patient registers. Two datasets are available: 

1. Counts of patients by practice attended x sex x LSOA of residence - published quarterly

2. Counts of patients by practice attended x sex x age - published monthly

The purpose of the code in this repository is to take these published data and consolidate them into a time series of patient **counts by sex x age x Local Authority District of residence** that can be used as the basis for subsequent demographic analysis. Modelled counts of patients by age, sex, and local authority of residence are created by a simple process of apportioning the data for each GP practice in (2) by the distribution for each practice in (1).

The underlying data are published on the [NHS Digital website](https://digital.nhs.uk/data-and-information/publications/statistical/patients-registered-at-a-gp-practice). Each month's extracts are published on their own pages, which usually follow the naming convention:

```
.../patients-registered-at-a-gp-practice/<month>-<year>
```

The data is published in csv files in a format that conforms to the tidy data convention. There are minor inconsistencies in the formatting, naming, and location of extracts published over the years, which this code aims to workaround.




## Usage




## Example

This is a basic example which shows you how to solve a common problem:

```{r example}

## basic example code
```

What is special about using `README.Rmd` instead of just `README.md`? You can include R chunks like so:

```{r cars}
summary(cars)
```

You'll still need to render `README.Rmd` regularly, to keep `README.md` up-to-date. `devtools::build_readme()` is handy for this. You could also use GitHub Actions to re-render `README.Rmd` every time you push. An example workflow can be found here: <https://github.com/r-lib/actions/tree/master/examples>.

You can also embed plots, for example:

```{r pressure, echo = FALSE}
plot(pressure)
```

In that case, don't forget to commit and push the resulting figure files, so they display on GitHub and CRAN.
